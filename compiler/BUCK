java_library(
  name = "compiler",
  srcs = glob(["src/**/*.java"]),
  deps = [
    "//core:core",
    "//reflect:reflect",
    "//reflect:model",
    "//third-party/args4j:args4j",
    "//third-party/json:json",
    "//utils:utils",
  ],
)

java_test(
  name = "test",
  srcs = glob(["test/**/*.java"]),
  deps = [
    ":compiler",
    "//core:core",
    "//reflect:reflect",
    "//reflect:model",
    "//third-party/json:json",
    "//third-party/junit:junit",
  ],
)

java_binary(
  name = "compile",
  deps = [
    ":compiler",
  ],
  main_class = "org.apache.thrift.j2.compiler.Compiler",
  visibility = [
    "PUBLIC"
  ],
)
